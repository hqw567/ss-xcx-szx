(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/details/school"],{"2ff7":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={mpHtml:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/mp-html/components/mp-html/mp-html")]).then(n.bind(null,"cf3a"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.relatNews.length?{"margin-top":0,"border-bottom":"1px solid #eee"}:null),o=t.relatMajor.length?{"margin-top":0,"border-bottom":"1px solid #eee"}:null,i=t.relatSchool.length?{"margin-top":0,"border-bottom":"1px solid #eee"}:null;t.$mp.data=Object.assign({},{$root:{a0:n,a1:o,a2:i}})},a=[]},"4e7e":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("c774"),i=n("bd40"),a=n("5729"),r=n("852e");function l(t){return h(t)||u(t)||c(t)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function u(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function h(t){if(Array.isArray(t))return f(t)}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var d=function(){n.e("components/library/DetailsSuspend").then(function(){return resolve(n("7f53"))}.bind(null,n)).catch(n.oe)},m=function(){n.e("components/library/DetailsSkeleton").then(function(){return resolve(n("a944"))}.bind(null,n)).catch(n.oe)},p=function(){n.e("components/library/DetailsTit").then(function(){return resolve(n("0950"))}.bind(null,n)).catch(n.oe)},g=function(){n.e("components/list/SchoolList").then(function(){return resolve(n("c991"))}.bind(null,n)).catch(n.oe)},b=function(){n.e("components/list/MajorList").then(function(){return resolve(n("7f65"))}.bind(null,n)).catch(n.oe)},v=function(){Promise.all([n.e("common/vendor"),n.e("components/list/NewsList")]).then(function(){return resolve(n("2130"))}.bind(null,n)).catch(n.oe)},w={data:function(){return{id:null,requestTask:null,schoolData:{},environmentData:"",contentData:"",zhaoshengzy:[],tags:[],relatSchool:[],relatNews:[],relatMajor:[]}},components:{DetailsSuspend:d,DetailsSkeleton:m,SchoolList:g,MajorList:b,DetailsTit:p,NewsList:v},onLoad:function(e){e.id?(this.id=e.id,this.requestTask=(0,o.getSchoolDetails)(this.id)):t.switchTab({url:"/pages/home/home"})},onShow:function(){var e=this;0===Object.keys(this.schoolData).length&&this.requestTask.then((function(n){var i=n.data;if(i.pzid.trim()){var r=/,|，|、|\|/,s=i.pzid.split(r).join(",");(0,o.getzhaoshengzy)(s).then((function(t){e.zhaoshengzy=t.data.rows,e.relatMajor=t.data.rows,console.log(e.relatMajor)}))}-1===i.titlepic.indexOf(a.websiteUrl)&&(i.titlepic=a.websiteUrl+i.titlepic),e.contentData=i.newstext,e.environmentData=i.huanjing,e.schoolData=i,e.tags=[].concat(l(i.xuexiaoxingzhi.split("|")),l(i.pttags.split("|")),[i.xuexiaoleixing]).filter((function(t){return t.length>0})),t.setNavigationBarTitle({title:i.title}),e.setBdWebtate(),e.getSchoolListFn(),e.getSearchNewsFn()}))},methods:{setBdWebtate:function(){var t=this.schoolData,e=[t.titlepic];-1===t.titlepic.indexOf(a.websiteUrl)&&t.titlepic&&(e=[a.websiteUrl+t.titlepic]),swan.setPageInfo({title:t.seotitle+" - 上职校网",keywords:t.keyboard,description:t.smalltext,releaseDate:t.newstime,articleTitle:t.seotitle+" - 上职校网",image:e})},getSchoolListFn:function(){var t=this;(0,o.getSchoolList)(this.schoolData.classid,1,8).then((function(e){var n=e.data.rows;n=n.filter((function(e){return e.id!==t.schoolData.id})),t.relatSchool=n.sort(r.randomsort)}))},getSearchNewsFn:function(){var t=this,e=this.schoolData.title;e=e.slice(0,5),(0,i.getSearch)(e,1,8).then((function(e){t.relatNews=e.data.rows}))}},computed:{zszyStyle:function(){return this.zhaoshengzy.length<5?{width:"44%"}:{}}},onShareAppMessage:function(t){"button"===t.from&&console.log(t.target);var e=getCurrentPages(),n=(e[e.length-1].route,e[e.length-1]["$page"].fullPath);return{title:this.schoolData.title,path:n,imageUrl:this.schoolData.titlepic,content:this.schoolData.smalltext,desc:this.schoolData.smalltext}}};e.default=w}).call(this,n("5486")["default"])},"52e9":function(t,e,n){"use strict";(function(t,e){n("900c");i(n("66fd"));var o=i(n("ab3e"));function i(t){return t&&t.__esModule?t:{default:t}}t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("5486")["default"],n("5486")["createPage"])},9997:function(t,e,n){"use strict";n.r(e);var o=n("4e7e"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},a2a9:function(t,e,n){},ab3e:function(t,e,n){"use strict";n.r(e);var o=n("2ff7"),i=n("9997");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("c95e");var r,l=n("f0c5"),s=Object(l["a"])(i["default"],o["b"],o["c"],!1,null,"3a9e891d",null,!1,o["a"],r);e["default"]=s.exports},c95e:function(t,e,n){"use strict";var o=n("a2a9"),i=n.n(o);i.a}},[["52e9","common/runtime","common/vendor"]]]);