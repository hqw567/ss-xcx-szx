(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/details/major"],{"0ff8":function(t,e,n){"use strict";n.r(e);var a=n("60af"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"26aa":function(t,e,n){},"60af":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n("47b9"),i=n("a6c1"),o=n("2121"),r=n("454b");function l(t){return d(t)||u(t)||c(t)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function u(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function d(t){if(Array.isArray(t))return f(t)}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var m=function(){n.e("components/library/DetailsSkeleton").then(function(){return resolve(n("b7b5"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/library/DetailsSuspend").then(function(){return resolve(n("653c"))}.bind(null,n)).catch(n.oe)},p=function(){n.e("components/library/DetailsTit").then(function(){return resolve(n("3a97"))}.bind(null,n)).catch(n.oe)},b=function(){n.e("components/list/MajorList").then(function(){return resolve(n("09e6"))}.bind(null,n)).catch(n.oe)},g=function(){Promise.all([n.e("common/vendor"),n.e("components/list/NewsList")]).then(function(){return resolve(n("8639"))}.bind(null,n)).catch(n.oe)},v=function(){n.e("components/list/SchoolList").then(function(){return resolve(n("5acf"))}.bind(null,n)).catch(n.oe)},w={data:function(){return{id:null,requestTask:null,detailsData:{},tags:[],vistaData:null,introduceData:null,relatMajor:[],relatNews:[],relatSchool:[],ttData:[{ttid:29,name:"农林牧渔大类"},{ttid:30,name:"资源环境与安全大类"},{ttid:31,name:"能源动力与材料大类"},{ttid:32,name:"装备制造大类"},{ttid:33,name:"生物与化工大类"},{ttid:34,name:"轻纺食品大类"},{ttid:35,name:"交通运输大类"},{ttid:36,name:"电子信息大类"},{ttid:37,name:"医药卫生大类"},{ttid:38,name:"财经商贸大类"},{ttid:39,name:"旅游服务大类"},{ttid:40,name:"文化艺术大类"},{ttid:41,name:"新闻传播大类"},{ttid:42,name:"教育与体育大类"},{ttid:43,name:"公共管理与服务大类"},{ttid:44,name:"土木水利大类"}]}},components:{DetailsSuspend:h,DetailsSkeleton:m,MajorList:b,NewsList:g,DetailsTit:p,SchoolList:v},onLoad:function(e){e.id?this.requestTask=(0,a.getMajorDetails)(e.id):t.switchTab({url:"/pages/home/home"})},onShow:function(){var e=this;0===Object.keys(this.detailsData).length&&this.requestTask.then((function(n){var a=n.data;-1===a.titlepic.indexOf(o.websiteUrl)&&(a.titlepic=o.websiteUrl+a.titlepic);var i=e.ttData.find((function(t){return t.ttid===Number(a.ttid)}));e.tags=[i.name].concat(l(a.zyshuxing.split("|").filter((function(t){return t.length>0})))),e.vistaData=a.zhuanyeqianjing,e.introduceData=a.newstext,e.detailsData=a,t.setNavigationBarTitle({title:a.title}),e.setBdWebtate(),e.getMajorListFn(),e.getSearchNewsFn(),e.getMajorOpenSchoolFn()}))},methods:{setBdWebtate:function(){var t=this.detailsData,e=[t.titlepic];-1===t.titlepic.indexOf(o.websiteUrl)&&t.titlepic&&(e=[o.websiteUrl+t.titlepic]),swan.setPageInfo({title:t.seotitle+" - 上职校网",keywords:t.keyboard,description:t.smalltext,releaseDate:t.newstime,articleTitle:t.seotitle+" - 上职校网",image:e})},getMajorListFn:function(){var t=this;(0,a.getMajorList)(this.detailsData.ttid,1,9).then((function(e){var n=e.data.rows;n=n.filter((function(e){return e.id!==t.detailsData.id})),t.relatMajor=n.sort(r.randomsort)}))},getSearchNewsFn:function(){var t=this,e=this.detailsData.title;e=e.slice(0,5),(0,i.getSearch)(e,1,8).then((function(e){t.relatNews=e.data.rows}))},getMajorOpenSchoolFn:function(){var t=this;(0,a.getMajorOpenSchool)(this.detailsData.id).then((function(e){t.relatSchool=e.data.rows}))}},onShareAppMessage:function(t){"button"===t.from&&console.log(t.target);var e=getCurrentPages(),n=(e[e.length-1].route,e[e.length-1]["$page"].fullPath);return{title:this.detailsData.title,path:n,imageUrl:this.detailsData.titlepic,content:this.detailsData.smalltext,desc:this.detailsData.smalltext}}};e.default=w}).call(this,n("5486")["default"])},8335:function(t,e,n){"use strict";n.r(e);var a=n("9171"),i=n("0ff8");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("b4c8");var r,l=n("f0c5"),s=Object(l["a"])(i["default"],a["b"],a["c"],!1,null,"17cac82e",null,!1,a["a"],r);e["default"]=s.exports},9171:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={mpHtml:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/mp-html/components/mp-html/mp-html")]).then(n.bind(null,"0c1d"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.relatNews.length?{"margin-top":0,"border-bottom":"1px solid #eee"}:null),a=t.relatSchool.length?{"margin-top":0,"border-bottom":"1px solid #eee"}:null,i=t.relatMajor.length?{"margin-top":0,"border-bottom":"1px solid #eee"}:null;t.$mp.data=Object.assign({},{$root:{a0:n,a1:a,a2:i}})},o=[]},b4c8:function(t,e,n){"use strict";var a=n("26aa"),i=n.n(a);i.a},f042:function(t,e,n){"use strict";(function(t,e){n("504e");i(n("66fd"));var a=i(n("8335"));function i(t){return t&&t.__esModule?t:{default:t}}t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("5486")["default"],n("5486")["createPage"])}},[["f042","common/runtime","common/vendor"]]]);