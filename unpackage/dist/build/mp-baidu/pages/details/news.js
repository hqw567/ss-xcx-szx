(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/details/news"],{"182e":function(t,e,n){"use strict";n.r(e);var i=n("d173"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},"433b":function(t,e,n){"use strict";n.r(e);var i=n("fa0b"),a=n("182e");for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("aa55");var o,l=n("f0c5"),r=Object(l["a"])(a["default"],i["b"],i["c"],!1,null,"58f913c0",null,!1,i["a"],o);e["default"]=r.exports},aa55:function(t,e,n){"use strict";var i=n("cd12"),a=n.n(i);a.a},b0ed:function(t,e,n){"use strict";(function(t,e){n("900c");a(n("66fd"));var i=a(n("433b"));function a(t){return t&&t.__esModule?t:{default:t}}t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n("5486")["default"],n("5486")["createPage"])},cd12:function(t,e,n){},d173:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("edb6"),a=n("bd40"),s=n("5729"),o=function(){n.e("components/library/DetailsSuspend").then(function(){return resolve(n("7f53"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/library/DetailsTit").then(function(){return resolve(n("0950"))}.bind(null,n)).catch(n.oe)},r=function(){n.e("components/library/DetailsSkeleton").then(function(){return resolve(n("a944"))}.bind(null,n)).catch(n.oe)},u=function(){Promise.all([n.e("common/vendor"),n.e("components/list/NewsList")]).then(function(){return resolve(n("2130"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("components/list/SchoolList").then(function(){return resolve(n("c991"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/list/MajorList").then(function(){return resolve(n("7f65"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/library/Icons").then(function(){return resolve(n("0f7e"))}.bind(null,n)).catch(n.oe)},h=null,m={components:{DetailsSuspend:o,DetailsTit:l,DetailsSkeleton:r,NewsList:u,SchoolList:c,MajorList:d,Icons:f},data:function(){return{id:"",requestTask:null,relatNews:[],relatMajor:[],relatSchool:[],newsDetailsData:{},html:"",disabled:null,appear:!1,like:0,like5:!1,isFavor:!1}},filters:{formatWriter:function(t){return t},formatNewsTime:function(t){return t.slice(5)}},onLoad:function(e){this.isFavor=getApp().globalData.isFavor,e.id?(this.id=e.id,this.requestTask=(0,i.getNewsDetails)(e.id)):t.switchTab({url:"/pages/home/home"})},onShow:function(){var e=this;0===Object.keys(this.newsDetailsData).length&&this.requestTask.then((function(n){e.newsDetailsData=n.data,e.like=Number(n.data.diggtop),e.html=n.data.newstext;e.$refs.article;t.setNavigationBarTitle({title:n.data.title}),e.setBdWebtate(),e.getSchoolListFn(),e.getMajorListFn(),e.getInformation()}))},onUnload:function(){h&&h.disconnect()},methods:{favorstatuschange:function(t){console.log(t),t.detail&&!0===t.detail.isFavor&&(this.disabled=!1,console.log(t.detail.isFavor))},setBdWebtate:function(){var t=this.newsDetailsData,e=[t.titlepic];-1===t.titlepic.indexOf(s.websiteUrl)&&t.titlepic&&(e=[s.websiteUrl+t.titlepic]),swan.setPageInfo({title:t.title+" - 上职校网",keywords:t.keyboard,description:t.smalltext,releaseDate:t.newstime,articleTitle:t.title+" - 上职校网",likes:t.istop+1,image:e})},getInformation:function(){var t=this;if(!this.relatNews.length){var e=this.newsDetailsData,n=e.keyboard,i=/,|，|、|\|/,s=n.split(i);e.tuijianydbt1.trim()&&s.push(e.tuijianydbt1.trim()),e.tuijianydbt2.trim()&&s.push(e.tuijianydbt2.trim()),e.tuijianydbt3.trim()&&s.push(e.tuijianydbt3.trim()),e.tuijianydbt4.trim()&&s.push(e.tuijianydbt4.trim()),e.tuijianydbt5.trim()&&s.push(e.tuijianydbt5.trim());var o=s.join(",");(0,a.getSearch)(o,1,9).then((function(e){var n=e.data.rows;n=n.filter((function(e){return e.id!==t.newsDetailsData.id})),t.relatNews=n}))}},getSchoolListFn:function(){var t=this,e=this.newsDetailsData.title;e=e&&e.slice(0,5),(0,a.getSearch)(e,1,8,"pt").then((function(e){t.relatSchool=e.data.rows}))},getMajorListFn:function(){var t=this,e=this.newsDetailsData.title,n=e.indexOf("专业");n>-1&&(e=e.slice(0,n)),e=e&&e.slice(0,5),(0,a.getSearch)(e,1,8,"pz").then((function(e){t.relatMajor=e.data.rows}))},setNewsLikeFn:function(){this.like5?t.showToast({title:"您已点赞5次啦",icon:"none"}):(this.like++,this.like===Number(this.newsDetailsData.diggtop)+5&&(this.like5=!0),(0,i.setNewsLike)(this.id).then())}},onShareAppMessage:function(t){"button"===t.from&&console.log(t.target);var e=getCurrentPages(),n=(e[e.length-1].route,e[e.length-1]["$page"].fullPath);return{title:this.newsDetailsData.title,path:n,imageUrl:s.websiteUrl+this.newsDetailsData.titlepic,content:this.newsDetailsData.smalltext,desc:this.newsDetailsData.smalltext}}};e.default=m}).call(this,n("5486")["default"])},fa0b:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var i={mpHtml:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/mp-html/components/mp-html/mp-html")]).then(n.bind(null,"cf3a"))}},a=function(){var t=this,e=t.$createElement,n=(t._self._c,t.newsDetailsData.title?t._f("formatNewsTime")(t.newsDetailsData.newstime):null),i=t.newsDetailsData.title?t._f("formatWriter")(t.newsDetailsData.writer):null,a=t.relatSchool.length?{"margin-top":0,"border-bottom":"1px solid #eee"}:null,s=t.relatMajor.length?{"margin-top":0,"border-bottom":"1px solid #eee"}:null,o=t.relatNews.length?{"margin-top":0,"border-bottom":"1px solid #eee"}:null;t.$mp.data=Object.assign({},{$root:{f0:n,f1:i,a0:a,a1:s,a2:o}})},s=[]}},[["b0ed","common/runtime","common/vendor"]]]);